(function(e,t){typeof exports!="undefined"?module.exports=t(e):typeof define=="function"&&define.amd?define("index",[],function(){return typeof Basbosa=="undefined"?e.BasbosaValidation=t(e):t(e)}):e.BasbosaValidation=t(e)})(this,function(e){var t=function(){},n,r=require("underscore"),i=require("async");return t.prototype.Rules={urlPattern:new RegExp("((http|https)(://))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(/{1}[a-zA-Z0-9]+)*/?","i"),isObjectId:function(e,n,r,i){return typeof r=="function"&&(i=r,r=undefined),n===undefined?e.length!=24?(i==="function"&&i(!1),!1):(i==="function"&&i(/[\da-f]{24}/.test(e)),/[\da-f]{24}/.test(e)):t.prototype.Rules.string(e,n)?e[n].length!=24?(i==="function"&&i(!1),!1):(i==="function"&&i(/[\da-f]{24}/.test(e[n])),/[\da-f]{24}/.test(e[n])):(i==="function"&&i(!1),!1)},isPresent:function(e,t,n,i){return typeof n=="function"&&(i=n,n=undefined),i==="function"&&i(r.has(e,t)),r.has(e,t)},string:function(e,n,i,s){return typeof i=="function"&&(s=i,i=undefined),n===undefined?(s==="function"&&s(r.isString(n)),r.isString(n)):(s==="function"&&s(t.prototype.Rules.isPresent(e,n)&&r.isString(e[n])),t.prototype.Rules.isPresent(e,n)&&r.isString(e[n]))},numeric:function(e,n,i,s){return typeof i=="function"&&(s=i,i=undefined),n===undefined?(s==="function"&&s(r.isNumber(e)),r.isNumber(e)):(s==="function"&&s(t.prototype.Rules.isPresent(e,n)&&r.isNumber(e[n])),t.prototype.Rules.isPresent(e,n)&&r.isNumber(e[n]))},url:function(e,n,r,i){return typeof r=="function"&&(i=r,r=undefined),r===undefined&&(r=n,n=e,e=undefined),e===undefined?(i==="function"&&i(self.urlPattern.test(n)),t.prototype.Rules.urlPattern.test(n)):(i==="function"&&i(t.prototype.Rules.isPresent(e,n)&&t.prototype.Rules.urlPattern.test(e[n])),t.prototype.Rules.isPresent(e,n)&&t.prototype.Rules.urlPattern.test(e[n]))},maxLength:function(e,n,r,i){return typeof r=="function"&&(i=r,r=undefined),r===undefined&&(r=n,n=e,e=undefined),e===undefined?(i==="function"&&i(n.length>=r),n.length>=r):(i==="function"&&i(t.prototype.Rules.isPresent(e,n)&&e[n].length>=r),t.prototype.Rules.isPresent(e,n)&&e[n].length>=r)},email:function(e,t,n,r){return typeof t=="function"&&(r=t,n={},t={}),typeof n=="function"&&(r=n,n={}),r==="function"&&r(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)),/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},minLength:function(e,n,r,i){return typeof r=="function"&&(i=r,r=undefined),r===undefined&&(r=n,n=e,e=undefined),e===undefined?(i==="function"&&i(n.length<=r),n.length<=r):(i==="function"&&i(t.prototype.Rules.isPresent(e,n)&&e[n].length<=r),t.prototype.Rules.isPresent(e,n)&&e[n].length<=r)},rang:function(e,n,r,i){return typeof r=="function"&&(i=r,r=n,n=e,e=undefined),i==="function"&&i(t.prototype.Rules.minLength(e,n,r.max)&&t.prototype.Rules.maxLength(e,n,r.min)),t.prototype.Rules.minLength(e,n,r.max)&&t.prototype.Rules.maxLength(e,n,r.min)}},t.prototype.validate=function(e,t,n){if(r.isEmpty(e))return typeof n=="function"&&n(!1),!1;var i=new Array;return r.each(e,function(e){r.each(e,function(e,s){r.each(e,function(e){if(r.isArray(e)){var o=r.first(e),u=r.union([t,s],r.rest(e,1));if(o.length<r.size(u))return typeof n=="function"&&n(!1),!1;if(o.length>r.size(u))return typeof n=="function"&&n(!1),!1;i.push(o.apply(null,u))}else i.push(e(t,s))})})}),r.all(i,r.identity)?(typeof n=="function"&&n(!0),!0):(typeof n=="function"&&n(!1),!1)},typeof n=="undefined"&&(n=new t),typeof Basbosa!="undefined"&&Basbosa.add("BasbosaValidation",n),n})