(function(e,t){typeof exports!="undefined"?module.exports=t(e):typeof define=="function"&&define.amd?define("index",[],function(){return typeof Basbosa=="undefined"?e.BasbosaValidation=t(e):t(e)}):e.BasbosaValidation=t(e)})(this,function(e){function s(e,t){if(t===undefined||t==="function")return!1;if(e!==undefined&&t!=="function")return!0}function o(e,t,n){return e==="function"&&(t=e),typeof t=="function"&&t(n),n}var t=function(){},n,r=require("underscore"),i=require("async");return t.prototype.Rules={urlPattern:new RegExp("((http|https)(://))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(/{1}[a-zA-Z0-9]+)*/?","i"),isObjectId:function(e,n,r,i){return s(e,n)?o(r,i,t.prototype.Rules.string(e,n)&&e[n].length==24&&/[\da-f]{24}/.test(e[n])):o(n,i,e[n].length==24&&/[\da-f]{24}/.test(e))},isPresent:function(e,t,n,i){return typeof n=="function"&&(i=n,n=undefined),typeof i=="function"&&i(r.has(e,t)),r.has(e,t)},string:function(e,n,i,u){return s(e,n)?o(i,u,t.prototype.Rules.isPresent(e,n)&&r.isString(e[n])):o(n,u,r.isString(e))},numeric:function(e,n,i,u){return s(e,n)?o(i,u,t.prototype.Rules.isPresent(e,n)&&r.isNumber(e[n])):o(n,u,r.isNumber(e))},url:function(e,n,r,i){return s(e,n)?o(r,i,t.prototype.Rules.isPresent(e,n)&&t.prototype.Rules.urlPattern.test(e[n])):o(n,i,t.prototype.Rules.urlPattern.test(e))},maxLength:function(e,n,r,i){if(s(e,n))return t.prototype.Rules.isPresent(e,n)?o(r,i,e[n].length>=r.max):o(r,i,e.length>=n.max)},email:function(e,t,n,r){return s(e,t)?o(n,r,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e[t])):o(t,r,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e))},minLength:function(e,n,r,i){if(s(e,n))return t.prototype.Rules.isPresent(e,n)?o(r,i,e[n].length<=r.min):o(r,i,e.length<=n.min)},rang:function(e,n,r,i){if(s(e,n)&&t.prototype.Rules.isPresent(e,n))return o(r,i,t.prototype.Rules.minLength(e,n,r.min)&&t.prototype.Rules.maxLength(e,n,r.max))}},t.prototype.validateA=function(e,t,n){var s=[];r.isEmpty(t)&&typeof n=="function"&&n(null,!0),r.each(t,function(t,n){r.each(t,function(t){s.push(function(r){t.rule(e,n,{min:t.min,max:t.max},function(e){e||r(t.message),e&&r(null,e)})})})}),i.parallel(s,function(e,t){e?typeof n=="function"&&n(e):t&&typeof n=="function"&&n(null,t)})},t.prototype.validate=function(e,t,n){if(r.isEmpty(e))return typeof n=="function"&&n(!1),!1;var i=new Array;return r.each(e,function(e){r.each(e,function(e,s){r.each(e,function(e){if(r.isArray(e)){var o=r.first(e),u=r.union([t,s],r.rest(e,1));if(o.length<r.size(u))return typeof n=="function"&&n(!1),!1;if(o.length>r.size(u))return typeof n=="function"&&n(!1),!1;i.push(o.apply(null,u))}else i.push(e(t,s))})})}),r.all(i,r.identity)?(typeof n=="function"&&n(!0),!0):(typeof n=="function"&&n(!1),!1)},typeof n=="undefined"&&(n=new t),typeof Basbosa!="undefined"&&Basbosa.add("BasbosaValidation",n),n})